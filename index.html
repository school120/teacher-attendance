<!doctype html>
<meta charset="utf-8">
<title>Probe â€“ studentSearch</title>
<body style="font-family:system-ui; max-width:760px; margin:24px auto;">
<h2>Probe: studentSearch</h2>
<p>Type a student last name or a 10-digit legacy ID:</p>
<input id="q" style="width:100%;padding:10px;font-size:18px" placeholder="e.g. Abish or 3279319146">
<pre id="out" style="background:#111;color:#0f0;padding:12px;border-radius:8px;white-space:pre-wrap;"></pre>
<script>
const ENDPOINT='https://script.google.com/macros/s/AKfycbzF4Hy0W2ZBbB6dOPRcT3PIKsEZekW2HtHuPAAp99jwUpasH7Iq1mMYCtQ35WEPfkiQQw/exec';
const q=document.getElementById('q'), out=document.getElementById('out');

q.addEventListener('input', async ()=>{
  const v=q.value.trim(); if(!v){ out.textContent=''; return; }
  try{
    const r=await fetch(`${ENDPOINT}?action=studentSearch&q=${encodeURIComponent(v)}`);
    const j=await r.json();
    out.textContent = JSON.stringify(j, null, 2);
  }catch(e){
    out.textContent = 'NETWORK/JSON ERROR: ' + e;
  }
});
</script>
</body>
